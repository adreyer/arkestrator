{% extends "base.html" %}

{% load cache %}

{% block content %}
    <table class="thread_list">
    {% for thread in thread_list %}
        {% if thread.creator == user %}
            <tr class="my_post">
        {% else %}
            <tr class="{% cycle "row1" "row2" %}">
        {% endif %}
            <td>{{ thread.creator.username }}</td>
            <td>{% if thread.unread %}
                    <b><a href="{% url view-thread thread.id %}">
                        {% if thread.stuck %}<strong>Sticky: </strong>{% endif %}
                        {{ thread.subject }}</a></b>
                {% else %}
                    <a href="{% url view-thread thread.id %}">
                        {% if thread.stuck %}<strong>Sticky: </strong>{% endif %}
                        {{ thread.subject }}</a>
                {% endif %}
            </td>
            <td>{{ thread.last_post|date:"P d-M-Y"}} by {{ thread.last_post_by.username }}</td>
            <td>{{ thread.total_posts }}</td>
            <td><a href="{% url thread-history thread.id %}">
                {{ thread.total_views }}</a></td>
        </tr>
    {% endfor %}
    </table>
    <div class="pagination">
        <strong> Go to page: </strong>
        {% for p in page_list %}
            {% if p == page_obj.number %}
                <strong>{{ p }},</strong>
            {% else %}
                <a href="?page={{ p }}">{{ p }},</a>
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
